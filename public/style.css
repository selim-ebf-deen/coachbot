/* ======================================================
   CoachBot - UI CSS (sans framework)
   Propre, sobre, responsive
   ====================================================== */

/* --------- Reset / base --------- */
* { box-sizing: border-box; }
html, body { height: 100%; }
:root{
  --bg: #f6f7f9;
  --card: #ffffff;
  --text: #202124;
  --muted: #5f6368;
  --primary: #1a73e8;
  --primary-600: #1767cf;
  --primary-700: #145bb8;
  --ring: rgba(26, 115, 232, .35);
  --ok: #0f9d58;
  --danger: #d93025;
  --border: #e5e7eb;
  --chip: #eef3fd;
}
body{
  margin: 0;
  font: 15px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background: var(--bg);
}

/* --------- Layout --------- */
.container{
  max-width: 980px;
  margin: 0 auto;
  padding: 24px 16px 40px;
}

.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: 0 1px 3px rgba(0,0,0,.06);
}

/* --------- Header --------- */
.header{
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}
.header-title{
  font-size: 20px;
  font-weight: 600;
  color: var(--text);
}
.header-spacer{ flex: 1; }
#who{
  color: var(--muted);
  font-size: 14px;
}
.header-actions{
  display: flex;
  gap: 8px;
  align-items: center;
}

/* --------- Controls bar --------- */
.controls{
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 12px;
  padding: 14px;
  margin-bottom: 16px;
}
@media (max-width: 720px){
  .controls{
    grid-template-columns: 1fr 1fr;
  }
}

/* Selects / inputs (haut) */
.select, .input, .textarea{
  width: 100%;
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
  background: #fff;
  color: var(--text);
  outline: none;
  transition: box-shadow .15s ease, border-color .15s ease;
}
.select:focus, .input:focus, .textarea:focus{
  border-color: var(--primary);
  box-shadow: 0 0 0 3px var(--ring);
}

/* Petit chip “Fournisseur : …” si tu l’utilises */
.chip{
  display: inline-flex;
  align-items: center;
  padding: 6px 10px;
  border-radius: 999px;
  background: var(--chip);
  color: #1f2a44;
  border: 1px solid #d2e3fc;
  font-size: 13px;
}

/* --------- Boutons --------- */
.btn{
  border: 1px solid var(--border);
  background: #fff;
  color: var(--text);
  padding: 10px 14px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 500;
  transition: background .15s, color .15s, transform .05s;
}
.btn:active{ transform: scale(.98); }
.btn:hover{ background: #f3f4f6; }

.btn-primary{
  background: var(--primary);
  border-color: var(--primary);
  color: #fff;
}
.btn-primary:hover{
  background: var(--primary-600);
  color: #fff;
}
.btn-primary:active{ background: var(--primary-700); }

/* important pour tes demandes : texte blanc au survol */
.btn-ghost{
  background: #eef2ff;
  color: var(--primary);
  border-color: #dbe2ff;
}
.btn-ghost:hover{
  background: var(--primary);
  color: #fff; /* ✅ texte blanc au hover */
}

/* --------- Plan du jour --------- */
.plan{
  padding: 14px 16px;
  border-top: 1px dashed var(--border);
  font-size: 14px;
  color: var(--muted);
}

/* --------- Zone chat --------- */
.chat-wrap{
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 14px;
  height: min(64vh, 560px);
  overflow: hidden;
}
#chat{
  overflow: auto;
  padding-right: 6px; /* marge pour scroll */
}

/* Bulles */
.bubble{
  max-width: 80%;
  padding: 10px 12px 10px 14px;
  border-radius: 12px;
  position: relative;
  margin: 8px 0;
  border: 1px solid var(--border);
  line-height: 1.45;
  word-wrap: break-word;
  white-space: pre-wrap;
}
.bubble.me{
  margin-left: auto;
  background: #eaf5ee;
  border-color: #d1ead8;
}
.bubble.ai{
  margin-right: auto;
  background: #fde8e6;
  border-color: #f3c7c2;
}
.dot{
  width: 8px; height: 8px; border-radius: 50%;
  display: inline-block;
  margin-right: 8px;
  vertical-align: middle;
}
.dot.me{ background: var(--ok); }       /* ✅ vert = utilisateur */
.dot.ai{ background: var(--danger); }   /* ✅ rouge = coach */

.system{
  background: #fff4e5;
  border-color: #ffe1b6;
  color: #7a4e00;
}

/* --------- Zone de saisie --------- */
.input-row{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px;
  padding: 14px;
  border-top: 1px solid var(--border);
  align-items: end;
}
#msg{
  resize: none;           /* géré en JS (auto-resize) */
  max-height: 180px;      /* sécurité anti-débordement */
  min-height: 44px;
}

/* info sous le champ */
.helper{
  padding: 0 14px 10px;
  color: var(--muted);
  font-size: 13px;
}
.helper b{ color: #1f7a1f; }
.helper .coach{ color: #9b1c14; }

/* --------- Modale (Login / Register) --------- */
#scrim{
  position: fixed; inset: 0;
  display: none;          /* scrim.show = flex */
  align-items: center; justify-content: center;
  background: rgba(0,0,0,.25);
  z-index: 50;
}
.modal{
  width: min(640px, 92vw);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: 0 10px 36px rgba(0,0,0,.16);
  padding: 16px;
}
.modal-header{
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 10px;
}
.modal-title{ font-weight: 600; }
.modal-close{
  border: none; background: transparent; cursor: pointer; color: var(--muted);
}
.tabs{
  display: inline-flex; gap: 8px; margin: 10px 0 12px;
}
.tab{
  padding: 6px 10px; border-radius: 999px; border: 1px solid var(--border);
  background: #fff; color: var(--muted); cursor: default;
}
.tab.active{
  background: var(--primary); color: #fff; border-color: var(--primary);
}
.modal-grid{
  display: grid; gap: 10px;
}
.modal-actions{
  display: flex; gap: 10px; align-items: center; margin-top: 6px;
}
#loginErr{ color: var(--danger); font-size: 13px; }
#loginInfo{
  color: #1f7a1f; font-size: 13px; display: none;
}

/* --------- Utilitaires --------- */
.mt-12{ margin-top: 12px; }
.mt-16{ margin-top: 16px; }
.mb-8{ margin-bottom: 8px; }
.center{ display: flex; justify-content: center; align-items: center; }

/* --------- Cartes principales --------- */
.block{
  margin-bottom: 16px;
  padding: 0;
}
.block .block-body{ padding: 0; }
.block .block-inner{ padding: 12px; }

/* Cartes : en‑tête (titre + actions à droite) */
.block-header{
  display: flex; align-items: center; gap: 10px;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
}
.block-title{ font-weight: 600; }
.block-header .spacer{ flex: 1; }

/* “Connecté : Selim” bien aligné à droite */
.header .header-spacer + #who{ margin-right: 8px; }

/* --------- Lien Admin dans header --------- */
.badge-admin{
  padding: 6px 10px;
  background: var(--chip);
  border: 1px solid #d2e3fc;
  color: #1f2a44;
  border-radius: 999px;
  font-size: 13px;
}

/* --------- Tables (si tu en as sur /admin) --------- */
.table{
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}
.table th, .table td{
  padding: 10px 8px;
  border-bottom: 1px solid var(--border);
  text-align: left;
}
.table th{ color: var(--muted); font-weight: 600; }
.table .badge{
  display: inline-block; padding: 3px 8px; border-radius: 999px;
  background: #eef2ff; color: #2c3e7a; border: 1px solid #dbe2ff;
}

/* --------- Petits états --------- */
.muted{ color: var(--muted); }
.ok{ color: var(--ok); }
.err{ color: var(--danger); }

/* --------- Scrollbars (optionnel) --------- */
#chat::-webkit-scrollbar{ width: 10px; }
#chat::-webkit-scrollbar-thumb{ background: #d7dbe1; border-radius: 8px; }
#chat::-webkit-scrollbar-track{ background: transparent; }
