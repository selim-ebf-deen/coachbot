<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CoachBot ‚Äî Programme 15 jours</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container">

    <!-- Header -->
    <div class="header">
      <div class="header-title">CoachBot</div>
      <div class="header-spacer"></div>
      <div id="who">Non connect√©</div>
      <div class="header-actions">
        <!-- Lien Admin : visible seulement si role = admin (g√©r√© par main.js via display) -->
        <a id="adminBtn" href="/admin" class="btn btn-ghost" style="display:none">Admin</a>
        <button id="logoutBtn" class="btn btn-ghost" style="display:none">D√©connexion</button>
        <button id="loginBtn" class="btn btn-primary">Connexion</button>
      </div>
    </div>

    <!-- Bloc contr√¥les + plan -->
    <div class="card block">
      <div class="block-header">
        <div class="block-title">Programme 15 jours</div>
        <div class="spacer"></div>
        <!-- Fournisseur (optionnel) -->
        <div class="chip">Fournisseur :
          <select id="providerSel" class="select" style="margin-left:8px;width:auto">
            <option value="claude" selected>Claude</option>
          </select>
        </div>
      </div>

      <div class="block-body">
        <div class="controls">
          <select id="daySel" class="select" aria-label="Jour"></select>
          <button id="showPlan" class="btn btn-ghost">Afficher</button>
        </div>
        <div id="plan" class="plan"></div>
      </div>
    </div>

    <!-- Bloc chat -->
    <div class="card block">
      <div class="block-body">
        <div class="chat-wrap">
          <div id="chat"></div>

          <div class="input-row">
            <textarea
              id="msg"
              class="textarea"
              placeholder="√âcris ton message au coach‚Ä¶ (Entr√©e = envoyer, Shift+Entr√©e = retour)"
              rows="2"
            ></textarea>
            <button id="sendBtn" class="btn btn-primary">Envoyer</button>
          </div>

          <div class="helper">
            Point <b>vert</b> = toi ‚Ä¢ Point <span class="coach">rouge</span> = coach
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Modale Connexion / Inscription -->
  <div id="scrim">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">Connexion</div>
        <button id="closeModal" class="modal-close" aria-label="Fermer">Fermer ‚úï</button>
      </div>

      <div class="tabs">
        <span class="tab active">Utilisateur</span>
        <span class="tab">Admin</span> <!-- purement visuel; l'API g√®re les r√¥les -->
      </div>

      <div class="modal-grid">
        <label>Email
          <input id="email" class="input" type="email" placeholder="email@domaine.com" autocomplete="username">
        </label>

        <label>Mot de passe
          <div style="position:relative">
            <input id="pass" class="input" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
            <button id="toggleEye" type="button"
              style="position:absolute;right:8px;top:50%;transform:translateY(-50%);border:none;background:transparent;color:#5f6368;cursor:pointer">
              üëÅ
            </button>
          </div>
        </label>

        <label>Pr√©nom (pour inscription)
          <input id="regName" class="input" type="text" placeholder="Ex : Selim" autocomplete="given-name">
        </label>

        <div class="modal-actions">
          <button id="doLogin" class="btn btn-primary">Connexion</button>
          <button id="doRegister" class="btn">Inscription</button>
          <span id="loginInfo">‚úÖ Connect√©.</span>
          <span id="loginErr"></span>
        </div>
      </div>
    </div>
  </div>

  <script src="/main.js" defer></script>
</body>
</html>
